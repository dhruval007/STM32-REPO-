# STM-Learningssss
STM32 Architecture, Firmware, BoardSCH, Compiling, ETC.


IN STM32CubeIDE we mostly configure src/main.h,irc/main.h and .ioc File.

MyProject/
├── Core/
│   ├── Inc/
│   │   └── main.h  <-- Files We will be Working With
│   ├── Src/
│   │   └── main.c  <-- Files We will be Working With
│   ├── Startup/
│   │   └── startup_stm32xxxx.s
│   └── system_stm32xxxx.c
│
├── Drivers/
│   ├── CMSIS/
│   └── STM32xxxx_HAL_Driver/
├── Middlewares/
│   └── ...
│
├── STM32CubeMX.ioc <-- Files We will be Working With
├── .project
├── .cproject
├── Makefile
└── README.md

<h1>1) At the top of main.c, you will see lines like:</h1>

<b>#include "main.h"</b>
This includes all necessary function declarations and hardware configuration details.
You normally do not need to modify this part.

<h1>2. Global Variable Declaration</h1>
ADC_HandleTypeDef hadc1;
TIM_HandleTypeDef htim1;
uint16_t adcValues[5];
uint16_t servoSpeedLeft, servoSpeedRight;

3. Function Prototypes

void SystemClock_Config(void);
static void MX_GPIO_Init(void);
static void MX_ADC1_Init(void);
static void MX_TIM1_Init(void);

These are initialization functions automatically generated by STM32CubeMX.

4. The main() Function
This is the heart of your program.
It looks like this:

int main(void)
{
    HAL_Init();                   // Initialize the HAL library (hardware abstraction layer)
    SystemClock_Config();         // Set up system clock speed
    MX_GPIO_Init();               // Initialize GPIO pins
    MX_ADC1_Init();               // Initialize ADC
    MX_TIM1_Init();               // Initialize Timer for PWM

    // Start peripherals after initialization
    HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);
    HAL_ADC_Start_DMA(&hadc1, (uint32_t*)adcValues, 5);

    // Main loop
    while (1)
    {
        // Your application code runs here
        // Example: Read sensors, calculate motor speed, send PWM
    }
}


5. while(1) – The Infinite Loop
The while(1) loop runs forever.
Whatever you place inside this loop will repeat continuously while the MCU is powered.

Typical things done inside this loop:

Reading sensor data
Controlling motor speed or direction
Checking conditions or flags
Sending data through serial communication

6. User Code Sections

STM32CubeIDE marks sections as:


/* USER CODE BEGIN 0 */
/* USER CODE END 0 */

and

/* USER CODE BEGIN 2 */
/* USER CODE END 2 */

Anything you write between these comments will not be deleted if you regenerate the code from CubeMX.


7. Summary
Declare global variables before main() in the USER CODE BEGIN 0 section.
All initialization happens at the start of main().
The while(1) loop is where your continuous logic runs.
Always write inside USER CODE sections to protect your code from regeneration.
Avoid editing auto-generated setup functions unless necessary.


   The .ioc file (e.g., STM32CubeMX.ioc) is the CubeMX configuration file for your STM32 project.
It defines your entire microcontroller configuration, including:

MCU selection
Clock tree setup
Peripheral initialization
GPIO pin assignments
Middleware options
Code generation settings

<center> <img width="186" height="273" alt="image" src="https://github.com/user-attachments/assets/c999ba40-8ab9-4b9f-9613-7b977210cc31" /> </center>


Open the .ioc file — this launches the CubeMX configuration GUI inside STM32CubeIDE.

Configure clocks, peripherals, and pins visually.

Click “Generate Code”.It will Generate

CubeMX updates the initialization functions and driver configurations in your project.
